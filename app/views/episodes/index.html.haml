- title "Sub Board"
- headline "The Sub Board"

- unless @requests_by_day.empty?
  - subtitle "Be a hero: take one of these slots!"

  %table.sub-board
    %thead
      - ["Monday", "Tuesday", "Wednesday", "Thursday",
        "Friday", "Saturday", "Sunday"].each do |day|
        %td=day

    - @weeks.each do |week|
      %tr
        - (0..6).each do |wday|
          - day = week + wday.days
          - format = day.day == 1 || day == @weeks.first ? '%b %d' : '%d'
          %td
            %p.req-day= day.strftime(format)

            - if reqs = @requests_by_day[day]
              - reqs.sort_by(&:at).each do |episode_needing_sub|
                .sub-req
                  %p.req-time= episode_needing_sub.at.strftime '%l%P'
                  %p.req-name
                    = link_to episode_needing_sub do
                      = episode_needing_sub.show.unambiguous_name

- else
  - subtitle 'There are currently no outstanding sub requests!'
