- title "#{@specialty_show.name}"
- headline "#{@specialty_show.name}"
- subtitle "Coordinated by ".html_safe + link_to("#{@specialty_show.coordinator.name}", @specialty_show.coordinator)
- back_link link_to "Back to Schedule", edit_semester_path(@specialty_show.semester)
- dj_can_update_show = dj_signed_in? && current_dj.can_update?(@specialty_show)
- if dj_can_update_show
  = content_for :sidebar do
    =render 'form'

%h3 Rotating Hosts
- if dj_signed_in? && current_dj.can_update?(@specialty_show)
  .subtitle
    =link_to "Reassign rotation", deal_specialty_show_path(@specialty_show), method: :patch
    to unconfirmed episodes.
.rotating-hosts
  -@specialty_show.rotating_hosts.each do |host|
    .tiled.rotating-host{data: ({dj_id: host.id} if dj_can_update_show)}
      =render host

%h3 Episodes
.episodes
  - @episodes.each do |episode|
    .showinfo.tiled{class: ["episode#{'-past' if episode.past? }", "episode-#{episode.status}"], data: ({episode_path: episode_path(episode)} if dj_can_update_show)}
      %p=episode.date_string
      - unless dj_signed_in?
        -if episode.past?
          %p.show-instance-links
            =link_to "#{episode.songs.count} #{"song".pluralize(episode.songs.count)}",
              episode
      %p.with=episode.status_string
      %p.rightalign
        - if dj_signed_in?
          &nbsp;
          - if episode.past?
            =link_to "#{episode.songs.count} #{"song".pluralize(episode.songs.count)}",
              episode_songs_path(episode)
          - elsif !episode.unassigned? && current_dj.can_update?(episode)
            =link_to "Request Substitute", episode_request_sub_path(episode)
